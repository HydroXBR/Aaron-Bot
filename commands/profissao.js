const { MessageEmbed } = require('discord.js'),
db = require("quick.db")

exports.run = async (client, message, args) => {
  try{
    let user = message.mentions.users.first() || client.users.cache.get(args[0]) || message.guild.members.cache.get(args[0]) || client.users.cache.find(user => user.id == args[0]) || message.author;

    let profiss√£o = db.get(`work_${message.guild.id}_${user.id}`);
    let work = profiss√£o == null ? "Nenhuma" : profiss√£o;
    let emojiwork = db.get(`emojiwork_${message.guild.id}_${user.id}`);
    let lv = db.get(`lv_${message.author.id}`) || 0;
    let pp = db.get(`prefix_${message.guild.id}`) || `-`;

    let embed = new MessageEmbed()
      .setTitle("Profiss√£o")
      .setDescription(`${profiss√£o == null ? "Aqui, voc√™ pode escolher sua profiss√£o. At√© agora, voc√™ n√£o tem nenhuma. =/ Reaja de acordo com a profiss√£o que deseja" : `Aqui, voc√™ pode escolher sua profiss√£o. Atualmente, voc√™ √© **${profiss√£o}**. Reaja de acordo com a profiss√£o que deseja`}, lembrando que h√° requisito de level.\n\n**Level atual:** \`${lv}\`\n\n:clown: Palha√ßo(a) - Level 0\n:camera_with_flash: Fot√≥grafo(a) - Level 2\n:hammer_pick: Minerador(a)  - Level 3\n:hammer: Marceneiro(a) - Level 4\n:ambulance: M√©dico(a)  - Level 5\n:helmet_with_cross: Bombeiro(a)  - Level 6\n:man_judge: Juiz(a)  - Level 7\n:police_car: Policial  - Level 8\n:arrow_forward: Youtuber  - Level 9\nüèûÔ∏è Artista  - Level 10\n\n<:sirene:844184014684160010> **HEY! ESPERA AS REA√á√ïES ABAIXO CARREGAREM, AT√â A √öLTIMA! ‚Üì**`)
      .setColor("#7FFFD4")
      .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")

    let msg = await message.inlineReply(embed);
    msg.react("ü§°")
    msg.react("üì∏")
    msg.react("‚öíÔ∏è")
    msg.react('üî®')
    msg.react("üöë")
    msg.react("‚õëÔ∏è")
    msg.react("üë®‚Äç‚öñÔ∏è")
    msg.react("üöì")
    msg.react("‚ñ∂Ô∏è")
    msg.react("üèûÔ∏è")

    const filter = (reaction, user) => {
	    return ['üî®', '‚öíÔ∏è', 'üöë', '‚õëÔ∏è', 'üë®‚Äç‚öñÔ∏è', 'ü§°', 'üöì', 'üì∏', '‚ñ∂Ô∏è', "üèûÔ∏è"].includes(reaction.emoji.name) && user.id == message.author.id
    };

    msg.awaitReactions(filter, { max: 1, time: 100000000,       errors: ['time'] })
	    .then(collected => {
	  const reaction = collected.first();


    if (reaction.emoji.name === 'ü§°') {
		  db.set(`work_${message.guild.id}_${user.id}`, `Palha√ßo(a)`);
      db.set(`emojiwork_${message.guild.id}_${user.id}`, `ü§°`)
      let pembed = new MessageEmbed()
        .setTitle("Profiss√£o escolhida com sucesso!")
        .setDescription(`Agora, sua **profiss√£o** √©:\n\n ü§° - Palha√ßo(a)`)
        .setColor("#00EEEE")
        .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
        .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
      msg.edit(pembed)
	  }
    if (reaction.emoji.name === 'üì∏') {
      if (lv >= 2) {
		    db.set(`work_${message.guild.id}_${user.id}`, `Fot√≥grafo(a)`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `üì∏`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n üì∏ - Fot√≥grafo(a)`)
          .setColor("#00EEEE")
          .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
          .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 8 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    if (reaction.emoji.name === '‚öíÔ∏è') {
      if (lv >= 3) {
		    db.set(`work_${message.guild.id}_${user.id}`, `Minerador(a)`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `‚öíÔ∏è`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n ‚öíÔ∏è - Minerador(a)`)
          .setColor("#00EEEE")
          .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
          .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 3 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
	  if (reaction.emoji.name === 'üî®') {
      if (lv >= 4) {
		    db.set(`work_${message.guild.id}_${user.id}`, `Marceneiro(a)`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `üî®`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n üî® - Marceneiro(a)`)
          .setColor("#00EEEE")
          .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
          .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 4 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    if (reaction.emoji.name === 'üöë') {
      if (lv >= 5) {
		    db.set(`work_${message.guild.id}_${user.id}`, `M√©dico(a)`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `üöë`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n üöë - M√©dico(a)`)
          .setColor("#00EEEE")
          .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
          .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 5 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    if (reaction.emoji.name === '‚õëÔ∏è') {
      if (lv >= 6) {
		    db.set(`work_${message.guild.id}_${user.id}`, `Bombeiro(a)`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `‚õëÔ∏è`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n ‚õëÔ∏è - Bombeiro(a)`)
          .setColor("#00EEEE")
          .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
          .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 6 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    if (reaction.emoji.name === 'üë®‚Äç‚öñÔ∏è') {
      if (lv >= 7) {
		  db.set(`work_${message.guild.id}_${user.id}`, `Juiz(a)`);
      db.set(`emojiwork_${message.guild.id}_${user.id}`, `üë®‚Äç‚öñÔ∏è`)
      let pembed = new MessageEmbed()
        .setTitle("Profiss√£o escolhida com sucesso!")
        .setDescription(`Agora, sua **profiss√£o** √©:\n\n üë®‚Äç‚öñÔ∏è - Juiz(a)`)
        .setColor("#00EEEE")
        .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
        .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
      msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 7 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    if (reaction.emoji.name === 'üöì') {
      if (lv >= 8) {
		    db.set(`work_${message.guild.id}_${user.id}`, `Policial`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `üöì`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n üöì - Policial`)
          .setColor("#00EEEE")
          .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
        .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 8 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    if (reaction.emoji.name === '‚ñ∂Ô∏è') {
      if (lv >= 9) {
		    db.set(`work_${message.guild.id}_${user.id}`, `Youtuber`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `‚ñ∂Ô∏è`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n ‚ñ∂Ô∏è - Youtuber`)
          .setColor("#00EEEE")
          .setThumbnail("https://images.emojiterra.com/google/android-pie/512px/1f4bc.png")
          .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 9 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    if (reaction.emoji.name === 'üèûÔ∏è') {
      if (lv >= 10) {
		    db.set(`work_${message.guild.id}_${user.id}`, `Artista`);
        db.set(`emojiwork_${message.guild.id}_${user.id}`, `üèûÔ∏è`)
        let pembed = new MessageEmbed()
          .setTitle("Profiss√£o escolhida com sucesso!")
          .setDescription(`Agora, sua **profiss√£o** √©:\n\n üèûÔ∏è - Artista`)
          .setColor("#00EEEE")
          .setThumbnail("https://thumbs.gfycat.com/ClumsyPositiveDiscus-size_restricted.gif")
          .setFooter("Parab√©ns por trabalhar, mesmo sendo pregui√ßoso KKK")
        msg.edit(pembed)
      } else {
        msg.edit(`Ops, ${message.author}! Desculpe, mas voc√™ precisa chegar at√© o n√≠vel 10 para ter essa profiss√£o. Atualmente, seu n√≠vel √© \`${lv}\`. Continue usando meus comandos e consulte o n√≠vel usando \`${pp}level\` :wink:`)
      }
	  }
    })
  }catch(e){
    console.log(e)
    message.inlineReply(`Ops, ${message.author}! Desculpe, mas n√£o consegui executar este comando... Contate-me em https://abre.ai/aaronbotsite ou aguarde e tente novamente :wink:`)
  }
}